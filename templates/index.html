{% extends "base.html" %}

{% block head %}
<link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/>
<link rel="apple-touch-icon" href="/images/icon-192.png" />

{% endblock head %}

{% block body %}
<div class="container mt-5">
  <div class="mb-4">
    <div class="row align-items-center">
      <div class="col-md-6">
        <h1>AMS-MAIN</h1>
      </div>
      <div class="col-md-6 text-end">
        {% if is_admin %}
          <button class="btn p-0" onclick="window.location.href='{{ url_for('router.admin.index') }}'" title="관리자" style="background: none; border: none; width: 2.5rem; height: 2.5rem; display: inline-flex; align-items: center; justify-content: center; vertical-align: middle;">
            <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" style="display: block;">
              <path fill="none" d="M0 0h24v24H0z"></path>
              <path d="M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"></path>
              <path d="M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"></path>
            </svg>
          </button>
        {% endif %}
        
        <button class="btn p-0" onclick="window.location.href='{{ url_for('router.user.dashboard') }}'" title="내 대시보드" style="background: none; border: none; width: 2.5rem; height: 2.5rem; display: inline-flex; align-items: center; justify-content: center; vertical-align: middle;">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" style="display: block;">
            <circle cx="12" cy="8" r="4"></circle>
            <path d="M12 14c-4 0-7 2-7 4v2h14v-2c0-2-3-4-7-4z"></path>
          </svg>
        </button>

        <button class="btn p-0" onclick="logout()" title="로그아웃" style="background: none; border: none; width: 2.5rem; height: 2.5rem; display: inline-flex; align-items: center; justify-content: center; vertical-align: middle;">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" style="display: block;">
            <path d="M16 13v-2H7V8l-5 4 5 4v-3z"></path>
            <path d="M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>
<div>

<script>
  function logout() {
    if (confirm("로그아웃 하시겠습니까?")) {
      window.location.href = '{{ url_for('router.user.logout') }}';
    }
  }


    (() => {
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register('/sw.js').then((registration) => {
                console.log("sw success:", registration);
            }).catch((err) => {
                console.error("sw fail:", err);
            });
        }
    })();
</script>
{% endblock body %}
